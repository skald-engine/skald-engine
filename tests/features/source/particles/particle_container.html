<!DOCTYPE html>
<html>
<head>
  <title></title>
  <script type="text/javascript" src="/build/lib/skald.min.js"></script>
</head>
<body>
  
  <h1>
    Using particle container
    <small>(FPS: <span id="fps">60</span>)</small>
    <small>(Particles: <span id="counter">0</span>)</small>
  </h1>

  <p>The particle system using PIXI.ParticleContainer. This example uses bursts every 500 milliseconds.</p>

  <script>
    // Configuration ----------------------------------------------------------
    sk.scene({
      name: 'base',
      initialize: function() {
        let container = new PIXI.ParticleContainer(5000, {
          position : true,
          alpha    : true,
          scale    : true
        })
        container.blendMode = sk.BLEND_MODE.ADD
        this.addStatic(container)

        this.emitter = new sk.particles.Emitter(container)
        this.emitter.configure({
          textures                : game.resources.get('blue'),
          emissor                 : new sk.particles.emissors.CircleEmissor(100),
          alphaEase               : sk.utils.easing.quadInOut,
          scaleEase               : sk.utils.easing.expoIn,
          emissionAngleFromCenter : true,
          life                    : 4000,
          maxParticles            : 5000,
          emissionRate            : 50,
          burstInterval           : 500,
          burstMin                : 10,
          burstMax                : 50,
          startSpeed              : 100,
          startSpeedVar           : 50,
          endSpeed                : 10,
          endSpeedVar             : 10,
          startScale              : 0.8,
          endScale                : 0,
          radialAcceleration      : -.5,
          tangentialAcceleration  : 1
        })
        this.emitter.start()
      },

      update: function(delta) {
        this.emitter.emissionX = game.mouse.x
        this.emitter.emissionY = game.mouse.y
        this.emitter.update(delta)

        document.getElementById('fps').innerHTML = game.time.fps
        document.getElementById('counter').innerHTML = this.emitter.counter
      }
    })

    // Game initialization ----------------------------------------------------
    let game = new sk.Game({
      display: {
        width: 1024,
        height: 768,
        backgroundColor: '#000000'
      },
      manifest: [
        {
          id   : 'particles',
          type : 'spriteSheet',
          url  : '../../assets/spritesheets/particles.json'
        },
      ]
    })

    // Starting ---------------------------------------------------------------
    game.addEventListener('resources.complete', () => {
      game.scenes.play('base')
    })

  </script>

</body>
</html>