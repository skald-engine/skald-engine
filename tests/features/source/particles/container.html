<!DOCTYPE html>
<html>
<head>
  <title></title>
  <script type="text/javascript" src="/build/lib/skald.min.js"></script>
</head>
<body>
  
  <h1>
    Using container
    <small>(FPS: <span id="fps">60</span>)</small>
    <small>(Particles: <span id="counter">0</span>)</small>
  </h1>

  <p>The particle system using PIXI.Container. Use the left mouse button to burst new particles.</p>

  <script>
    // Configuration ----------------------------------------------------------
    sk.scene({
      name: 'base',
      initialize: function() {
        let container = new PIXI.Container()
        this.addStatic(container)

        this.emitter = new sk.particles.Emitter(container)
        this.emitter.configure({
          textures                : game.resources.get('red'),
          alphaEase               : sk.utils.easing.quadInOut,
          scaleEase               : sk.utils.easing.expoIn,
          emissionAngleFromCenter : true,
          life                    : 1000,
          maxParticles            : 5000,
          emissionRate            : 100,
          startSpeed              : 200,
          endSpeed                : 100,
          startScale              : 0.8,
          endScale                : 0,
          startColor              : [255, 150, 50],
          endColor                : [200, 0, 0],
          blendMode               : sk.BLEND_MODE.SCREEN,
        })
        this.emitter.start()
      },

      update: function(delta) {
        this.emitter.emissionX = game.mouse.x
        this.emitter.emissionY = game.mouse.y
        this.emitter.update(delta)

        if (game.mouse.isPressed(sk.BUTTON.LEFT)) {
          this.emitter.burst(100, 100)
        }

        document.getElementById('fps').innerHTML = game.time.fps
        document.getElementById('counter').innerHTML = this.emitter.counter
      }
    })

    // Game initialization ----------------------------------------------------
    let game = new sk.Game({
      startScene: 'base',
      display: {
        width: 1024,
        height: 768,
        backgroundColor: '#000000'
      },
      manifest: [
        {
          id   : 'particles',
          type : 'spriteSheet',
          url  : '../../assets/spritesheets/particles.json'
        },
      ]
    })
  </script>

</body>
</html>