<!DOCTYPE html>
<html>
<head>
  <title></title>
  <script type="text/javascript" src="/build/lib/skald.min.js"></script>
</head>
<body>
  
  <h1>HTML5 Audio test</h1>
  
  <div id="loading">Loading assets...</div>
  <div id="test" style="display:none">
    <p>Game is running a <span id="running"></span> audio system.</p>
    <button onclick="play('coin')">Test coin</button>
  </div>
  

  <script>
    // Configuration ----------------------------------------------------------
    sk.setAudioSystems([
      sk.audio.HTML5AudioSystem
    ])

    function play(id) {
      let sound = game.sounds.get(id)
      sound.play()
    }

    // Game initialization ----------------------------------------------------
    const config = {
      resources: {basePath: '../../assets/'},
      display: {width: 1, height: 1},
      logger: {level: 'trace'}
    }
    const manifest = [
      {
        id   : 'coin',
        type : 'audio',
        url  : ['sfxs/coin_2.ogg', 'sfxs/coin_2.mp3'],
      },
    ]
    let game = new sk.Game(config, manifest)

    // Starting ---------------------------------------------------------------
    game.addEventListener('resources.complete', () => {
      document.getElementById('loading').style.display = 'none'
      document.getElementById('test').style.display = 'block'
      document.getElementById('running').innerHTML = game.sounds.system.type
    })

  </script>

</body>
</html>