<!DOCTYPE html>
<html>
<head>
  <title></title>
  <script type="text/javascript" src="/build/lib/skald.min.js"></script>
</head>
<body>
  
  <h1>Audio Sprite test</h1>
  
  <div id="loading">Loading assets...</div>
  <div id="test" style="display:none">
    <p>Game is running a <span id="running"></span> audio system.</p>
    
    <button onclick="play('sound1')">Sound 1</button><br><br>
    <button onclick="play('sound2')">Sound 2</button><br><br>
    <button onclick="play('sound3')">Sound 3</button><br><br>

    <button onclick="play('sound4')">Sound 4</button>
    <button onclick="stop('sound4')">Off</button><br>
  </div>
  

  <script>
    // Configuration ----------------------------------------------------------
    function play(id) {
      let sound = game.sounds.get(id)
      sound.play()
    }
    function stop(id) {
      let sound = game.sounds.get(id)
      sound.stop()
    }

    // Game initialization ----------------------------------------------------
    const config = {
      resources: {basePath: '../../assets/'},
      display: {width: 1, height: 1},
      logger: {level: 'trace'}
    }
    const manifest = [
      {
        type : 'audioSprite',
        url  : ['sfxs/sprite.ogg', 'sfxs/sprite.mp3'],
        data : [
          {id:'sound1', offset:0, duration:640},
          {id:'sound2', offset:1000, duration:800},
          {id:'sound3', offset:2000, duration:640},
          {id:'sound4', offset:3500, duration:2000, loop:true}
        ]
      },
    ]
    let game = new sk.Game(config, manifest)

    // Starting ---------------------------------------------------------------
    game.addEventListener('resources.complete', () => {
      document.getElementById('loading').style.display = 'none'
      document.getElementById('test').style.display = 'block'
      document.getElementById('running').innerHTML = game.sounds.system.type
    })

  </script>

</body>
</html>